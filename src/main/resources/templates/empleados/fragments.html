<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
    </head>
    <body>

        
        <div th:fragment="add-button" class="add-button">
            <a th:href="@{/empleados/nuevo}">Agregar</a>
            <i class="fa-solid fa-plus"></i>
        </div>
        

        <div th:fragment="list" class="list">
            <div class="employee header">
                <h3>Nombre:</h3>
                <p>Identificación:</p>
                <p>Correo:</p>
                <p>Teléfono:</p>
                <p>Activo:</p>
                <p>Profesión:</p>
            </div>
            <hr>
            <div th:each="employee : ${employees}" class="employee">
                <div class="employee-basic-information-container">
                    <img th:src="@{${employee.getPhoto().length() == 0 ? 'https://t4.ftcdn.net/jpg/04/10/43/77/360_F_410437733_hdq4Q3QOH9uwh0mcqAhRFzOKfrCR24Ta.jpg' : employee.getPhoto()}}" alt="">
                    <a th:href="@{/empleados/actualizar/} + ${employee.getIdentification()}">[[${employee.getName()}]] [[${employee.getFirstSurName()}]] [[${employee.getSecondSurName()}]]</a>
                </div>
                <p>[[${employee.getIdentification()}]]</p>
                <a th:href="@{'mailto:' + ${employee.getEmail()}}">[[${employee.getEmail()}]]</a>
                <p>[[${employee.getPhone()}]]</p>
                <p th:text="${employee.isActive()} ? 'Si' : 'No'" />
                <p>[[${employee.getProfession()}]]</p>
            </div>

        </div>

        <div th:fragment="options" class="employee-options">
            <div th:replace="~{empleados/fragments :: add-button}"></div>
        </div>


        <form th:fragment="form" th:action="@{/empleados/guardar}" th:object="${empleado}" method="POST" class="was-validated form" enctype="multipart/form-data">
            <input type="hidden" name="photo" th:field="*{photo}"/>   
            <input type="hidden" required placeholder="Contraseña" th:field="*{password}">
            <h1 th:text="${empleado.identification} != 0  ? 'Modificar Empleado' : 'Agregar Empleado'"></h1>

            <input th:if="${empleado.identification} == 0" type="number" min="10000000" required placeholder="Identificación" name="identification">
            <input th:if="${empleado.identification} != 0" type="number" min="10000000" required placeholder="Identificación" th:field="*{identification}">
            
            <input type="text" placeholder="Nombre" th:field="*{name}">        
            <input type="text" placeholder="Primer Apellido" th:field="${empleado.firstSurName}">            
            <input type="text" placeholder="Segundo Apellido" th:field="${empleado.secondSurName}">            
            <input type="email" required placeholder="Correo" th:field="*{email}">            
            <input type="text" placeholder="Teléfono" th:field="*{phone}">
            
            <input th:if="${empleado.identification} == 0" type="password" required placeholder="Contraseña" th:field="*{password}">
            <input type="text" placeholder="Profesión" th:field="*{profession}">
            <div class="checkbox">
                <label for="activo">Activo</label>
                <input class="" type="checkbox" name="active" id="activo" th:field="*{active}">
            </div>
            <input type="file" onchange="readURL(this)" name="imagenFile">
            <img id="blah" th:src="*{photo}" height="200">
            <button type="submit" th:text="${empleado.identification} != 0 ? 'Modificar' : 'Agregar'"></button>
        </form>
    </body>
</html>
